!function(e){"use strict";var t=window.aiovg_select||window.aiovg_public;function o(e=null){document.querySelectorAll(".aiovg-dropdown-terms").forEach(t=>{t!==e&&(t.querySelector(".aiovg-dropdown-list").style.display="none")})}e(function(){e(".aiovg-dropdown-terms").each(function(){!function t(o){var i=e(o),a=i.find(".aiovg-dropdown-input"),n=i.find(".aiovg-dropdown-list");if(0==n.find(".aiovg-dropdown-item").length)return!1;var l=function(){var t=[];i.find(".aiovg-item-selected").each(function(){var o=e(this).find(".aiovg-item-name").html().trim();t.push(o)}),a.val(t.join(", "))};a.on("click",function(){n.toggle()}),i.find(".aiovg-dropdown-item").on("click",function(t){"input"!==t.target.tagName.toLowerCase()&&e(this).find('input[type="checkbox"]').trigger("click")}),i.find('input[type="checkbox"]').on("change",function(){e(this).is(":checked")?e(this).closest(".aiovg-dropdown-item").addClass("aiovg-item-selected"):e(this).closest(".aiovg-dropdown-item").removeClass("aiovg-item-selected"),l(),n.hide()}),l()}(this)}),document.addEventListener("click",e=>{let t=e.target.closest(".aiovg-dropdown-terms");o(t)}),document.addEventListener("keydown",e=>{27==e.keyCode&&o()}),e(".aiovg-autocomplete").each(function(){var o=e(this).data("uid"),i="ta[]";void 0!==e(this).data("name")&&(i=e(this).data("name"));var a=[];e("option","#aiovg-autocomplete-select-"+o).each(function(){a.push({value:e(this).val(),label:e(this).text()})}),0==a.length&&a.push({value:0,label:t.i18n.no_tags_found});var n,l,c,r,s,d,u,v,g,p,m=function(t,a){if(0!=(t=parseInt(t))){var n=e("#aiovg-autocomplete-tags-"+o);if(0==n.find(".aiovg-tag-item-"+t).length){var l='<span class="aiovg-tag-item aiovg-tag-item-'+t+'">';l+='<a href="javascript:void(0);">',l+='<svg xmlns="http://www.w3.org/2000/svg" fill="none" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="aiovg-flex-shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>',l+=a,l+="</a>",l+='<input type="hidden" name="'+i+'" value="'+t+'" />',l+="</span>",n.append(l)}}};n=o,l=a,c=m,r=document.querySelector("#aiovg-autocomplete-input-"+n),s=document.querySelector("#aiovg-autocomplete-tags-"+n),d=-1,u=function(){var e=[];d=-1,v();var o=document.createElement("div");o.setAttribute("id","aiovg-autocomplete-items-"+n),o.setAttribute("class","aiovg-autocomplete-items"),r.parentNode.appendChild(o),l.forEach((i,a)=>{var n=i.value,d=i.label,u=!1;if(r.value?-1!==d.toLowerCase().indexOf(r.value.toLowerCase())&&(u=!0):u=!0,u||a!=l.length-1||0!=e.length||(n=0,d=t.i18n.no_tags_found,u=!0),u){var g=document.createElement("div");g.innerHTML=d,0==n&&(g.className="aiovg-text-muted"),null!==s.querySelector(".aiovg-tag-item-"+n)&&g.setAttribute("class","aiovg-autocomplete-selected"),g.addEventListener("click",function(){r.value="",c(n,d),v()}),o.appendChild(g),e.push(g)}})},v=function(e=null){var t=0;e&&e.id&&(t=e.id.replace("aiovg-autocomplete-input-","")),document.querySelectorAll(".aiovg-autocomplete-items").forEach(e=>{e.getAttribute("id")!="aiovg-autocomplete-items-"+t&&e.remove()})},g=function(e){p(e),d>=e.length&&(d=0),d<0&&(d=e.length-1),e[d].classList.add("aiovg-autocomplete-active")},p=function(e){e.forEach(e=>{e.classList.remove("aiovg-autocomplete-active")})},r.addEventListener("focus",function(e){""==e.target.value&&u()}),r.addEventListener("input",function(){u()}),r.addEventListener("keydown",function(e){var t=document.querySelector("#aiovg-autocomplete-items-"+n);if(t&&(t=t.querySelectorAll("div")),!t)return!1;40==e.keyCode?(d++,g(t)):38==e.keyCode?(d--,g(t)):13==e.keyCode&&(e.preventDefault(),d>-1&&t[d].click())}),t.hasOwnProperty("autocomplete")||(t.autocomplete=!0,document.addEventListener("click",function(e){v(e.target)}))}),e(document).on("click",".aiovg-tag-item a",function(t){t.preventDefault(),e(this).parent().remove()})})}(jQuery);