"use strict";var $;class AIOVGPaginationElement extends HTMLElement{constructor(){super(),this.$el=null,this.$container=null;let t=window.aiovg_pagination||window.aiovg_public;this._params={},this._isAjaxEnabled=!1,this._ajaxUrl=t.ajax_url,this._ajaxNonce=t.ajax_nonce,this._pageTopOffset=parseInt(t.scroll_to_top_offset),this._onNextOrPreviousPageButtonClicked=this._onNextOrPreviousPageButtonClicked.bind(this),this._onMoreButtonClicked=this._onMoreButtonClicked.bind(this)}connectedCallback(){this.$el=jQuery(this),this._params=this.$el.data("params"),this._params.action="aiovg_load_more_"+this._params.source,this._params.security=this._ajaxNonce,this.$container=jQuery("#aiovg-"+this._params.uid),(this.$el.hasClass("aiovg-pagination-ajax")||this.$el.hasClass("aiovg-more-ajax"))&&(this._isAjaxEnabled=!0),this._isAjaxEnabled&&(this.$el.on("click","a.page-numbers",this._onNextOrPreviousPageButtonClicked),this.$el.on("click","button",this._onMoreButtonClicked))}disconnectedCallback(){this._isAjaxEnabled&&(this.$el.off("click","a.page-numbers",this._onNextOrPreviousPageButtonClicked),this.$el.off("click","button",this._onMoreButtonClicked))}_onNextOrPreviousPageButtonClicked(t){t.preventDefault();let a=jQuery(t.target);this.$el.addClass("aiovg-spinner");let e=parseInt(this.$el.data("current")),i=parseInt(a.html());this._params.paged=i,a.hasClass("prev")&&(this._params.paged=e-1),a.hasClass("next")&&(this._params.paged=e+1),this._fetch(this._params,t=>{if(t.success){let a=jQuery(t.data.html).html();this.$container.html(a),this.$el.trigger("AIOVG.onGalleryUpdated"),jQuery("html, body").animate({scrollTop:this.$container.offset().top-this._pageTopOffset},500)}else this.$el.removeClass("aiovg-spinner")})}_onMoreButtonClicked(t){t.preventDefault();let a=jQuery(t.target);this.$el.addClass("aiovg-spinner");let e=parseInt(a.data("numpages")),i=parseInt(a.data("paged"));this._params.paged=++i,this._fetch(this._params,t=>{if(this.$el.removeClass("aiovg-spinner"),t.success){let s=jQuery(t.data.html).find(".aiovg-grid").html();this.$container.find(".aiovg-grid").append(s),i<e?a.data("paged",this._params.paged):a.hide(),this.$el.trigger("AIOVG.onGalleryUpdated")}})}_fetch(t,a){jQuery.post(this._ajaxUrl,t,a)}}($=jQuery)(function(){customElements.define("aiovg-pagination",AIOVGPaginationElement)});