(()=>{var e={942:(e,o)=>{var l;!function(){"use strict";var n={}.hasOwnProperty;function t(){for(var e="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(e=i(e,a(l)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return t.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var o="";for(var l in e)n.call(e,l)&&e[l]&&(o=i(o,l));return o}function i(e,o){return o?e?e+" "+o:e+o:e}e.exports?(t.default=t,e.exports=t):void 0===(l=function(){return t}.apply(o,[]))||(e.exports=l)}()}},o={};function l(n){var t=o[n];if(void 0!==t)return t.exports;var a=o[n]={exports:{}};return e[n](a,a.exports,l),a.exports}l.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return l.d(o,{a:o}),o},l.d=(e,o)=>{for(var n in o)l.o(o,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},l.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{"use strict";const e=window.wp.blocks;var o=l(942),n=l.n(o);const t=window.wp.serverSideRender;var a=l.n(t);const i=window.wp.blob,r=window.wp.components,s=window.wp.blockEditor,c=window.wp.element,d=window.wp.i18n,g=window.wp.compose,u=window.wp.data,p=window.wp.primitives,b=window.ReactJSXRuntime,v=(0,b.jsx)(p.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)(p.Path,{d:"M18.7 3H5.3C4 3 3 4 3 5.3v13.4C3 20 4 21 5.3 21h13.4c1.3 0 2.3-1 2.3-2.3V5.3C21 4 20 3 18.7 3zm.8 15.7c0 .4-.4.8-.8.8H5.3c-.4 0-.8-.4-.8-.8V5.3c0-.4.4-.8.8-.8h13.4c.4 0 .8.4.8.8v13.4zM10 15l5-3-5-3v6z"})}),_=window.wp.notices,h=["video"],x=["image"];(0,e.registerBlockType)("aiovg/video",{attributes:{blob:{type:"string",role:"local"},src:{type:"string"},id:{type:"number"},poster:{type:"string"},width:{type:"number",default:aiovg_blocks.video.width},ratio:{type:"number",default:aiovg_blocks.video.ratio},autoplay:{type:"boolean",default:aiovg_blocks.video.autoplay},loop:{type:"boolean",default:aiovg_blocks.video.loop},muted:{type:"boolean",default:aiovg_blocks.video.muted},playpause:{type:"boolean",default:aiovg_blocks.video.playpause},current:{type:"boolean",default:aiovg_blocks.video.current},progress:{type:"boolean",default:aiovg_blocks.video.progress},duration:{type:"boolean",default:aiovg_blocks.video.duration},speed:{type:"boolean",default:aiovg_blocks.video.speed},quality:{type:"boolean",default:aiovg_blocks.video.quality},volume:{type:"boolean",default:aiovg_blocks.video.volume},pip:{type:"boolean",default:aiovg_blocks.video.pip},fullscreen:{type:"boolean",default:aiovg_blocks.video.fullscreen},share:{type:"boolean",default:aiovg_blocks.video.share},embed:{type:"boolean",default:aiovg_blocks.video.embed},download:{type:"boolean",default:aiovg_blocks.video.download}},edit:function e({isSelected:o,attributes:l,className:t,setAttributes:p}){const w=(0,g.useInstanceId)(e),k=(0,c.useRef)(),{src:m,id:f,poster:y,width:j,ratio:C,autoplay:B,loop:R,muted:N,playpause:P,current:T,progress:M,duration:S,speed:H,quality:L,volume:U,pip:E,fullscreen:z,share:D,embed:I,download:q}=l,[O,V]=(0,c.useState)(l.blob);function A(e){if(!e||!e.url)return p({blob:void 0,src:void 0,id:void 0,poster:void 0}),void V();(0,i.isBlobURL)(e.url)?V(e.url):(p({blob:void 0,src:e.url,id:e.id,poster:e.image?.src!==e.icon?e.image?.src:void 0}),V())}function F(e){e!==m&&(p({blob:void 0,src:e,id:void 0,poster:void 0}),V())}!function(e={}){const o=(0,c.useRef)(e),l=(0,c.useRef)(!1),{getSettings:n}=(0,u.useSelect)(s.store);(0,c.useLayoutEffect)((()=>{o.current=e})),(0,c.useEffect)((()=>{if(l.current)return;if(!o.current.url||!(0,i.isBlobURL)(o.current.url))return;const e=(0,i.getBlobByURL)(o.current.url);if(!e)return;const{url:t,allowedTypes:a,onChange:r,onError:s}=o.current,{mediaUpload:c}=n();l.current=!0,c({filesList:[e],allowedTypes:a,onFileChange:([e])=>{(0,i.isBlobURL)(e?.url)||((0,i.revokeBlobURL)(t),r(e),l.current=!1)},onError:e=>{(0,i.revokeBlobURL)(t),s(e),l.current=!1}})}),[n])}({url:O,allowedTypes:h,onChange:A,onError:J});const{createErrorNotice:G}=(0,u.useDispatch)(_.store);function J(e){G(e,{type:"snackbar"})}const X=n()(t,{"is-transient":!!O}),$=(0,s.useBlockProps)({className:X});if(!m&&!O)return(0,b.jsx)("div",{...$,children:(0,b.jsx)(s.MediaPlaceholder,{icon:(0,b.jsx)(s.BlockIcon,{icon:v}),onSelect:A,onSelectURL:F,accept:"video/*",allowedTypes:h,value:l,onError:J,placeholder:e=>(0,b.jsx)(r.Placeholder,{className:"block-editor-media-placeholder",withIllustration:!o,icon:v,label:aiovg_blocks.i18n.media_placeholder_label,instructions:aiovg_blocks.i18n.media_placeholder_description,children:e})})});const K=`video-block__poster-image-description-${w}`;return(0,b.jsxs)(b.Fragment,{children:[o&&(0,b.jsx)(s.BlockControls,{group:"other",children:(0,b.jsx)(s.MediaReplaceFlow,{mediaId:f,mediaURL:m,allowedTypes:h,accept:"video/*",onSelect:A,onSelectURL:F,onError:J,onReset:()=>A(void 0)})}),(0,b.jsxs)(s.InspectorControls,{children:[(0,b.jsxs)(r.PanelBody,{title:aiovg_blocks.i18n.general_settings,className:"aiovg-block-panel",children:[(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.TextControl,{label:aiovg_blocks.i18n.width,help:aiovg_blocks.i18n.width_help,value:j>0?j:"",onChange:e=>p({width:isNaN(e)?0:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.TextControl,{label:aiovg_blocks.i18n.ratio,help:aiovg_blocks.i18n.ratio_help,value:C>0?C:"",onChange:e=>p({ratio:isNaN(e)?0:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.autoplay,checked:B,onChange:()=>p({autoplay:!B}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.loop,checked:R,onChange:()=>p({loop:!R}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.muted,checked:N,onChange:()=>p({muted:!N}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(s.MediaUploadCheck,{children:(0,b.jsxs)(r.BaseControl,{className:"editor-video-poster-control",children:[(0,b.jsx)(r.BaseControl.VisualLabel,{children:aiovg_blocks.i18n.poster_image}),(0,b.jsx)(s.MediaUpload,{title:aiovg_blocks.i18n.select_image,onSelect:function(e){p({poster:e.url})},allowedTypes:x,render:({open:e})=>(0,b.jsx)(r.Button,{variant:"primary",onClick:e,ref:k,"aria-describedby":K,__next40pxDefaultSize:!0,children:y?aiovg_blocks.i18n.replace_image:aiovg_blocks.i18n.select_image})}),(0,b.jsx)("p",{id:K,hidden:!0,children:y?(0,d.sprintf)("The current poster image url is %s",y):"There is no poster image currently selected"}),!!y&&(0,b.jsx)(r.Button,{variant:"tertiary",onClick:function(){p({poster:void 0}),k.current.focus()},__next40pxDefaultSize:!0,children:aiovg_blocks.i18n.remove_image})]})})})]}),(0,b.jsxs)(r.PanelBody,{title:aiovg_blocks.i18n.player_controls,className:"aiovg-block-panel",children:[(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.play_pause,checked:P,onChange:()=>p({playpause:!P}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.current_time,checked:T,onChange:()=>p({current:!T}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.progressbar,checked:M,onChange:()=>p({progress:!M}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.duration,checked:S,onChange:()=>p({duration:!S}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.speed,checked:H,onChange:()=>p({speed:!H}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.quality,checked:L,onChange:()=>p({quality:!L}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.volume,checked:U,onChange:()=>p({volume:!U}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.pip,checked:E,onChange:()=>p({pip:!E}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.fullscreen,checked:z,onChange:()=>p({fullscreen:!z}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.share,checked:D,onChange:()=>p({share:!D}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.embed,checked:I,onChange:()=>p({embed:!I}),__nextHasNoMarginBottom:!0})}),(0,b.jsx)(r.PanelRow,{children:(0,b.jsx)(r.ToggleControl,{label:aiovg_blocks.i18n.download,checked:q,onChange:()=>p({download:!q}),__nextHasNoMarginBottom:!0})})]})]}),(0,b.jsxs)("div",{...$,children:[m&&(0,b.jsx)(r.Disabled,{children:(0,b.jsx)(a(),{block:"aiovg/video",attributes:l})}),!!O&&(0,b.jsx)(r.Spinner,{})]})]})}})})()})();